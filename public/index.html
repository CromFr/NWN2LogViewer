<!doctype html>
<html lang="en" ng-app="logApp">
<head>
	<meta charset="utf-8">
	<title>Log viewer</title>
	<link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css">

	<script src="lib/angular/angular.js"></script>

	<script type="text/javascript">

		var app = angular.module('logApp', []);
		app.controller('LogCtrl', function($scope, $http){
			$scope.data = $http.get('/AuroraServerNWScript/BenchLog/data').success(function(data) {
				$scope.columns = data.columns;
				$scope.orderColumn = $scope.columns[0].code;

				$scope.logs = data.data;
			});
		});
	</script>
</head>
<!-- ######################################## -->
<body ng-controller="LogCtrl">

	<div class="form-group">
		<label for="searchScript">Search</label>
		<input class="form-control" id="searchScript" placeholder="Name" ng-model="searchName">
	</div>

	<table class="table table-striped table-condensed">
		<thead><tr>
			<th ng-repeat="column in columns" ng-click="$parent.orderColumn=($parent.orderColumn==column.code)? '-'+column.code : column.code">
				{{column.name}}
			    <span
			    	class="glyphicon {{($parent.orderColumn==column.code)? 'glyphicon-sort-by-attributes' : 'glyphicon-sort-by-attributes-alt'}}"
			    	style="opacity:{{$parent.orderColumn==column.code||$parent.orderColumn==('-'+column.code)? '1.0' : '0.0'}}"
			    	aria-hidden="true"></span>
			</th>
		</tr></thead>

		<tr ng-repeat="entry in logs | filter:searchName | orderBy:orderColumn">
			<td ng-repeat="column in columns">{{entry[column.code]}}</td>
		</tr>

	</table>


	<script src="lib/jquery/dist/jquery.min.js"></script>
	<script src="lib/bootstrap/dist/js/bootstrap.min.js"></script>
</body>
</html>
